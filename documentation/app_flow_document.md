# App Flow Document for EPOP Platform Starter

## Onboarding and Sign-In/Sign-Up
When a new user arrives at the EPOP Platform Starter, they land on a simple public landing page that introduces the main features and invites them to sign up or log in. The landing page offers two clear buttons labeled "Create an Account" and "Log In." Clicking "Create an Account" brings the user to a registration page where they enter their name, email address, and a password that meets basic complexity rules. Upon submitting the form, the system uses Better Auth to create the user record and send a confirmation message. If the user loses their password, they can click a "Forgot Password" link on the login page, enter their email address, and receive an email with a secure reset link. That link leads to a reset form where they choose a new password, after which they are redirected back to the login page.

Signing in requires the user’s email and password on a dedicated login page. Successful authentication sets a secure HTTP-only refresh token cookie along with a short-lived JWT for session state. The user can sign out by clicking a "Sign Out" button in the user menu, which clears the session tokens and takes them back to the public landing page. If authentication fails at any point due to invalid credentials or expired tokens, the application shows a friendly error message and prompts the user to retry or reset their password.

## Main Dashboard or Home Page
After signing in, the user sees the main dashboard, which consists of a sidebar navigation on the left, a header at the top, and a central content area. The sidebar lists links for the Home dashboard, Chat, AI Assistant, File Storage, Profile, and, for administrators, an Admin Panel. The header displays the current user’s name, a profile avatar, and a toggle for dark mode. Notifications or system messages appear as a small bell icon in the header.

The content area on the default Home dashboard shows a welcome message and a high-level summary of recent activity such as new messages, recent file uploads, or AI chat history. The navigation elements are always visible so that the user can move seamlessly from the dashboard to any other section by clicking on the corresponding sidebar link.

## Detailed Feature Flows and Page Transitions
When the user clicks the Chat link, the application transitions to a server-rendered chat page that fetches the latest messages from the database via Drizzle ORM. On that page, the user sees a scrollable message list and an input field at the bottom. As the user types a message, the Socket.IO connection is managed by a context provider. When the user sends a message, it is emitted to the Socket.IO server, saved in the database, and broadcast to all participants. Incoming messages update in real time and appear without refreshing.

Selecting the AI Assistant link brings the user to an AI chat interface powered by the Vercel AI SDK. The page displays a chat history component and an input area for prompts. When the user submits a prompt, an API route posts it to the AI service, which streams a response back. The UI renders the response progressively so the user sees it as it arrives. The chat history persists in the database if configured.

When the user opens the File Storage section, they arrive at a page that lists their uploaded files. Each file entry shows a file name, upload date, and a download button. The user can click an "Upload File" button to open a file picker, select one or more files, and see upload progress bars. The uploads go directly to MinIO storage via a secure API route. After completion, the new files appear in the list.

Clicking on the Profile link takes the user to an account page where they can view and edit personal information such as their display name and email. They can also change their password by providing the old password and entering a new one. All updates go through secure API endpoints with Zod schema validation. When the user saves changes, a confirmation message appears and the layout returns to the main navigation.

If the user has an administrator role and selects the Admin Panel, they enter a protected area that requires role-based access verification. The Admin Panel page presents tabs for user management and application metrics. In user management, admins can view a list of registered users, change roles, or revoke access. In metrics, the panel displays charts and summary statistics fetched from API endpoints. Attempting to access any admin page without proper privileges redirects the user to an "Access Denied" page.

## Settings and Account Management
From the Profile or the header menu, the user can open a Settings page to adjust preferences. On this page, the user toggles dark or light theme via the next-themes switch, and configures notification preferences for email alerts or in-app notices. All settings are stored in the database and applied immediately across the application.

The change password section within account management sends the old and new passwords to an API route that handles password updates using Better Auth. If successful, the user sees a success banner and is prompted to log in again with the new password as an extra security measure. Once done, the user can navigate back to the Home dashboard or any other section using the sidebar.

## Error States and Alternate Paths
If a user submits invalid data at sign-up or login, the forms validate input with Zod and display inline error messages such as "Email is invalid" or "Password must be at least eight characters." During network outages or lost connectivity, a full-page overlay informs the user with a message like "You are offline. Please check your internet connection."

While navigating, if the user tries to access a non-existent route, the application shows a custom 404 page with a link back to the Home dashboard. If the user attempts a restricted action such as visiting the Admin Panel without proper role, they see a 403 Access Denied page with a link to return to the main dashboard. In the file upload flow, if an upload fails due to size limits or server errors, the UI shows a red error badge next to the file name and offers a retry option.

## Conclusion and Overall App Journey
A typical user journey begins with creating an account via email and password, then signing in to explore the dashboard. From there, the user can chat in real time, interact with an AI assistant, and securely upload or download files. They can personalize their experience in Settings and manage personal details in the Profile page. Administrators have an additional path to manage users and view metrics in the Admin Panel. Throughout the application, validation and error handling guide the user safely back to a normal flow. Finally, the user logs out from the profile menu, ending the session and returning to the public landing page for their next visit.